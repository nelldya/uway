// BROWSER
var MOZILLA_FF = 10;
var APPLE_SAFARI = 11;
var GOOGLE_CHROME = 12;
var OPERASOFTWARE_OPERA = 13;
var MICOROSOFT_IE7 = 14;
var MICOROSOFT_IE8 = 15;
var MICOROSOFT_IE9 = 16;
var MICOROSOFT_IE9_X64 = 17;
var MICOROSOFT_IE10 = 18;
var MICOROSOFT_IE11 = 19;

function divReset($div)
{
	$div.find(":radio").attr("checked",false);
	$div.find(":checkbox").attr("checked",false);
	$div.find("select").attr("selectedIndex",0).val("");
	$div.find("input[type=hidden]:not([tafix=Y])").val("");
	$div.find("input[type=text]:not([tafix=Y])").val("");
	$div.find("textarea:not([tafix=Y])").val("");
}

function setDATAS(name,cd,nm,obj,maxcheck)
{
	maxcheck = maxcheck||0;

	if( obj && obj.getAttribute && String(obj.getAttribute('type')).toUpperCase()=='CHECKBOX' )
	{
		var ocd = document.getElementsByName(name+'CD')[0].value;
		var onm = document.getElementsByName(name+'NM')[0].value;
		var ocdArr = ocd.split(':');
		var onmArr = onm.split(':');
		var finded = false;
		for( var temp=0; temp<ocdArr.length; temp++ )
		{
			if( ocdArr[temp]==cd )
			{
				finded = true;
				delete(ocdArr[temp]);
				delete(onmArr[temp]);
				break;
			}
		}
		if( finded==false )
		{
			ocdArr[ocdArr.length] = cd;
			onmArr[onmArr.length] = nm;
		}
		cd = String(ocdArr.join(':')).replace(/^:/,'').replace(/:$/,'').replace(/:{2,}/g,':');
		nm = String(onmArr.join(':')).replace(/^:/,'').replace(/:$/,'').replace(/:{2,}/g,':');

		if( maxcheck!=0 )
		{
			var objs = document.getElementsByName(name);
			if( cd!='' && cd.split(':').length==maxcheck )
			{
				for( var temp=0; temp<objs.length; temp++ )
				{
					if( !objs[temp].checked ) objs[temp].disabled = true;
				}
			}
			else
			{
				for( var temp=0; temp<objs.length; temp++ )
				{
					if( objs[temp].disabled ) objs[temp].disabled = false;
				}
			}
		}
	}

	try
	{
		document.getElementsByName(name+'CD')[0].value = cd;
	}
	catch (err)
	{
	}
	try
	{
		document.getElementsByName(name+'NM')[0].value = nm;
	}
	catch (err)
	{
	}
}

function fnDivReset(name, visiable, displayType)
{
	window.events = new Array();
	var fm = null;
	if( document.getElementById(name) )
	{
		var fm = document.getElementById(name);
	}
	else if( typeof $ == 'function' && $('div[uniqueid="' + name + '"]').length > 0 )
	{
		fm = $('div[uniqueid="' + name + '"]').get(0);
	}

	if( fm != null )
	{
		if( visiable )
		{
			if( visiable == true )
			{
				if( displayType ) fm.style.display = displayType;
				else fm.style.display = "block";
			}
			else
			{
				fm.style.display = "none";
			}
		}
		else
		{
			fm.style.display = "none";
		}

		inputReset(fm.getElementsByTagName('INPUT'));
		inputReset(fm.getElementsByTagName('SELECT'));
		inputReset(fm.getElementsByTagName('TEXTAREA'));
	}
}

function inputReset(inputs)
{
	if( !inputs.length ) return false;

	for( var j = 0; j < inputs.length; j++ )
	{
		if( inputs[j].getAttribute("taGroup") == "Y" && inputs[j].tagName == "INPUT" && inputs[j].type == "hidden" )
		{
			if( inputs[j].value.match(/@Y@/) )
			{
				var layoutName = inputs[j].value.substring(0, inputs[j].value.indexOf("@"));
				fnDivReset(layoutName);
				inputs[j].value = inputs[j].value.replace(/@Y@/ig, '@N@');
			}
		}

		if( inputs[j].getAttribute("taFix") != "Y" )
		{ // 고정값일 경우는 초기화에서 제외
			if( inputs[j].tagName == "INPUT" && (inputs[j].type == "text" || inputs[j].type == "hidden" || inputs[j].type == "password") )
			{
				inputs[j].value = "";
			}
			else if( inputs[j].tagName == "INPUT" && (inputs[j].type == "radio" || inputs[j].type == "checkbox") )
			{
				inputs[j].checked = false;
				inputs[j].disabled = false;
				if( !in_array(String(inputs[j].onclick),window.events) )
				{
					window.events[events.length] = String(inputs[j].onclick);
					inputs[j].onclick();
				}
			}
			else if( inputs[j].tagName == "SELECT" )
			{
				inputs[j].selectedIndex = 0;
				if( !in_array(String(inputs[j].onchange),window.events) )
				{
					window.events[events.length] = String(inputs[j].onchange);
					inputs[j].onchange();
				}
			}
			else if( inputs[j].tagName == "TEXTAREA" )
			{
				inputs[j].value = "";
			}
		}
	}
}

function removeLimit()
{

}

function init_textarea(event)
{
	var obj = event.srcElement||event.target;
	if( !$(obj).attr('inited') )
	{
		$(obj).attr('inited', '1');
		$(obj).val('');
	}
}

function init_obj()
{
	// alert('a');
}

function chk_limitvalue()
{
}

function getYear(arg)
{
	if( !arg ) return '';
	return getFormValue(String(arg).toUpperCase()+'YEAR')||'';
}
function getMonth(arg)
{
	if( !arg ) return '';
	return getFormValue(String(arg).toUpperCase()+'MONTH')||'';
}
function getDay(arg)
{
	if( !arg ) return '';
	if( !$('*[name='+String(arg).toUpperCase()+'DAY'+']').length )
	{
		return '01';
	}
	return getFormValue(String(arg).toUpperCase()+'DAY')||'';
}

function objFillZero(obj, fillType, fillLength)
{
	fillType = String(fillType).toUpperCase();
	fillLength = fillLength || '0';
	if( fillType.match(/^([RL])$/) && fillLength > 0 )
	{
		var val = $(obj).val();
		fillLength = Number(fillLength) - String(val).length;
		while (fillLength > 0)
		{
			if( fillType == 'R' ) val += '0';
			else val = '0' + val;
			fillLength--;
		}
		$(obj).val(val);
	}
}

function objCheckDate(obj, min, max)
{
	var objname = $(obj).attr('name');
	$('input[name="' + objname.replace(/(YEAR|MONTH|DAY)$/,'DATE') + '"]').val('');

	if( $(obj).val() != '' )
	{
		if( objname.match(/(YEAR)$/) )
		{
			if( String($(obj).val()).length != 4 )
			{
				alert(strLengthYear(obj), function()
				{
					$(obj).val('');
					$('input[name="'+objname.replace(/(YEAR)$/,'DATE')+'"]').val('');
				});
				return false;
			}
			objFillZero(obj, 'L', 4);
		}
		else if( objname.match(/(MONTH)$/) )
		{
			if( Number($(obj).val())>=1 && Number($(obj).val())<=12 )
			{
				objFillZero(obj, 'L', 2);
			}
			else
			{
				alert(strInMonth(obj), function()
				{
					$(obj).val('');
					$('input[name="'+objname.replace(/(MONTH)$/,'DATE')+'"]').val('');
				});
				return false;
			}
		}
		else if( objname.match(/(DAY)$/) )
		{
			var maxday = getMaxDay(obj);
			if( maxday == false )
			{
				$(obj).val('');
				$('input[name="'+objname.replace(/(DAY)$/,'DATE')+'"]').val('');
				return false;
			}
			if( Number($(obj).val()) >= 1 && Number($(obj).val()) <= Number(maxday) )
			{
				objFillZero(obj, 'L', 2);
			}
			else
			{
				alert(strInDay(obj), function()
				{
					$(obj).val('');
					$('input[name="'+objname.replace(/(DAY)$/,'DATE')+'"]').val('');
				});
				return false;
			}
		}
		var year = $('input[name="'+objname.replace(/(YEAR|MONTH|DAY)$/,'YEAR')+'"]').val();
		if( $('input[name="'+objname.replace(/(YEAR|MONTH|DAY)$/,'MONTH')+'"]').length>0 )
		{
			var month = $('input[name="'+objname.replace(/(YEAR|MONTH|DAY)$/,'MONTH')+'"]').val();
		}
		else
		{
			var month = '01';
		}
		if( $('input[name="'+objname.replace(/(YEAR|MONTH|DAY)$/,'DAY')+'"]').length>0 )
		{
			var day = $('input[name="'+objname.replace(/(YEAR|MONTH|DAY)$/,'DAY')+'"]').val();
		}
		else
		{
			var day = '01';
		}

		if( year != '' && month != '' && day != '' )
		{
			min = min || '19010101';
			max = max || $.datepicker.formatDate('yy', new Date()) + '1231';
			var date = String(year) + String(month) + String(day);
			if( Number(date) >= Number(min) && Number(date) <= Number(max) )
			{
				$('input[name="' + objname.replace(/(YEAR|MONTH|DAY)$/,'DATE') + '"]').val(date);
				if( window.udf_ChkDate )
				{
					udf_ChkDate(obj);
				}
			}
			else
			{
				alert(strInDate(obj, min, max), function()
				{
					$('input[name="' + objname.replace(/(YEAR|MONTH|DAY)$/,'DATE') + '"]').val('');
					$('input[name="' + objname.replace(/(YEAR|MONTH|DAY)$/,'YEAR') + '"]').val('');
					$('input[name="' + objname.replace(/(YEAR|MONTH|DAY)$/,'MONTH') + '"]').val('');
					$('input[name="' + objname.replace(/(YEAR|MONTH|DAY)$/,'DAY') + '"]').val('');
				});
			}
		}
	}
}

function strLengthYear(obj)
{
	return '년도를 올바르게 입력해야 합니다.';
}

function strInDate(obj, min, max)
{
	return '입력가능한 범위의 날짜가 아닙니다.(' + min + '~' + max + ')';
}

function strInMonth(obj)
{
	return '올바른 월을 입력해야 합니다.';
}

function strInDay(obj)
{
	return '올바른 일자를 입력해야 합니다.';
}

function getMaxDay(obj)
{
	var objname = String($(obj).attr('name'));
	var year = $('input[name='+objname.replace(/(YEAR|MONTH|DAY)$/,'YEAR')+']').val();
	if( year == '' )
	{
		alert(strNeedYear(obj));
		return false;
	}
	var month = $('input[name='+objname.replace(/(YEAR|MONTH|DAY)$/,'MONTH')+']').val();
	if( month == '' )
	{
		alert(strNeedMonth(obj));
		return false;
	}
	return $.datepicker.formatDate('dd', new Date(year, month, 0));
}

function strNeedYear(obj)
{
	return '년도를 먼저 입력해야 합니다.';
}

function strNeedMonth(obj)
{
	return '월을 먼저 입력해야 합니다.';
}

function objAgeChange(obj,destName)
{
	var objname = String($(obj).attr('name'));
	var date = $('input[name='+objname.replace(/(YEAR|MONTH|DAY)$/,'DATE')+']').val();
	if( date!='' )
	{
		var nowdate = $.datepicker.formatDate('yymmdd', new Date());
		var age = sub(Number(String(nowdate).substr(0,4)), Number(String(date).substr(0,4)), 1);
		if( Number('1'+String(date).substr(4,4))<=Number('1'+String(nowdate).substr(4,4)) ) age++;
		if( $('input[name='+destName+']').length ) $('input[name='+destName+']').val(age);
	}
}

function objGenderChange(obj,destCD,destNM)
{
	var val = $(obj).val();
	if( !$('input[name='+destCD+']').length ) return false;
	if( !$('input[name='+destNM+']').length ) return false;
	$('input[name='+destCD+']').val('');
	$('input[name='+destNM+']').val('');

	if( val!='' )
	{
		if( (Number(String(val).substr(0,1))%2)==1 )
		{
			$('input[name='+destCD+']').val('1');
			$('input[name='+destNM+']').val('남자');
		}
		else if( (Number(String(val).substr(0,1))%2)==0 )
		{
			$('input[name='+destCD+']').val('2');
			$('input[name='+destNM+']').val('여자');
		}
	}
}

function strCheckLengthJuminno1(obj)
{
	return '주민등록번호 앞자리는 6자리로 정확하게 입력해야 합니다.';
}

function strCheckLengthJuminno2(obj)
{
	return '주민등록번호 뒷자리는 7자리로 정확하게 입력해야 합니다.';
}

function chkJuminno1(obj)
{
	var val = $(obj).val();
	if( val!='' )
	{
		if( val.length!=6 )
		{
			alert(strCheckLengthJuminno1(obj));
			$(obj).val('');
		}
	}
}

function chkJuminno2(obj)
{
	var val = $(obj).val();
	if( val!='' )
	{
		if( val.length!=7 )
		{
			alert(strCheckLengthJuminno2(obj));
			$(obj).val('');
		}
	}
}

function objChangeTel(obj, target, next)
{
	if( target )
	{
		$('input[name="' + target + '"]').val($(obj).val());
	}
	if( next )
	{
		$(obj).blur();
		$(':text[name="' + next + '"]').focus();
	}
}
function objCheckTel(obj, next)
{
	if( String(event.keyCode).match(/^(16|17|18|9|37|38|39|40)$/) ) // shift, alt, ctrl, tab, arrows
	{
	}
	else
	{
		if( next && String($(obj).val()).length == 4 )
		{
			$(obj).trigger('blur');
			$(':text[name="' + next + '"]').focus();
		}
	}
}
function removeNotNumbers(obj)
{
	if( String(event.keyCode).match(/^(16|17|18|9|37|38|39|40)$/) ) // shift, alt, ctrl, tab, arrows
	{
	}
	else
	{
		$(obj).val(String($(obj).val()).replace(/[^0-9]/g, ''));
	}
}
function removeNumbers(obj)
{
	if( String(event.keyCode).match(/^(16|17|18|9|37|38|39|40)$/) ) // shift, alt, ctrl, tab, arrows
	{
	}
	else
	{
		$(obj).val(String($(obj).val()).replace(/[0-9]/g, ''));
	}
}
function removeNotENGs(obj)
{
	if( String(event.keyCode).match(/^(16|17|18|9|37|38|39|40)$/) ) // shift, alt, ctrl, tab, arrows
	{
	}
	else
	{
		$(obj).val(String($(obj).val()).replace(/[^a-zA-Z]/g, ''));
	}
}
function removeENGs(obj)
{
	if( String(event.keyCode).match(/^(16|17|18|9|37|38|39|40)$/) ) // shift, alt, ctrl, tab, arrows
	{
	}
	else
	{
		$(obj).val(String($(obj).val()).replace(/[a-zA-Z]/g, ''));
	}
}
function chkInt(val)
{
	if( !String(val).match(/^([0-9]+)$/) )
	{
		return false;
	}
	return true;
}

function objCheckEqual($val1Obj, $val2Obj, falseMsg, $resObj)
{
	if( String($val1Obj.val())!='' )
	{
		if( String($val1Obj.val())==String($val2Obj.val()) )
		{
			if( $resObj ) $resObj.val('Y');
			return true;
		}
		else
		{
			if( falseMsg )
			{
				alert(falseMsg);
			}
			$val1Obj.val('');
			if( $resObj ) $resObj.val('');
			return false;
		}
	}
}

function objJoinText(objName, joint)
{
	$('input[name="'+objName+'"]').val('');
	var tempObjs = $('input[name="'+objName+'_TEMP[]"]');
	var tempVals = [];
	for( var temp=0; temp<tempObjs.length; temp++ )
	{
		var nVal = tempObjs.eq(temp).val();
		if( nVal=='' )
		{
			return false;
		}
		tempVals[temp] = nVal;
	}
	$('input[name="'+objName+'"]').val(tempVals.join(joint));
	return true;
}

// 사용자의 브라우저를 확인합니다.
function DetectedBrowser()
{
	var strUserAgent;
	var strPatternIE = /trident/i;
	var strPatternFireFox = /firefox/i;
	var strPatternChrome = /chrome/i;
	var strPatternOPera = /opr/i;
	var strPatternSafari = /(Version|AppleWebKit)/i;

	strUserAgent = navigator.userAgent.toLowerCase();

	// IE edge 설정
	if(strUserAgent.search("edge/") > -1){
		TPKISTD_CONNECT_URL = "wss://127.0.0.1:52075";
		return GOOGLE_CHROME;
	}
	else if(strPatternFireFox.test(strUserAgent) == true)
	{
// 2017-06-13 이기현
// 파이어폭스 ActiveX 지원 불가로 Non-ActiveX로 변경
		return GOOGLE_CHROME;
	}
	else if(strPatternChrome.test(strUserAgent) == true)
	{
		if(strPatternOPera.test(strUserAgent) == true)
		{
			return OPERASOFTWARE_OPERA;
		}
		else
		{
			return GOOGLE_CHROME;
		}
	}
	else if(strPatternSafari.test(strUserAgent) == true)
	{
		return APPLE_SAFARI;
	}
	else if(strUserAgent.match("msie 7.0") != null)
	{
		return MICOROSOFT_IE7;
	}
	else if(strPatternIE.test(strUserAgent) == true)
	{
		if(strUserAgent.match("trident/4.0") != null)
		{
			return MICOROSOFT_IE8;
		}
		else if(strUserAgent.match("trident/5.0") != null)
		{
			if(strUserAgent.match("win64; x64") != null)
			{
				return MICOROSOFT_IE9_X64;
			}
			else
			{
				return MICOROSOFT_IE9;
			}
		}
		else if(strUserAgent.match("trident/6.0") != null)
		{
			return MICOROSOFT_IE10;
		}
		else if(strUserAgent.match("trident/7.0") != null || strUserAgent.match("trident/8.0") != null)
		{
			return MICOROSOFT_IE11;
		}
	}

	return UNSUPPORTED;
}

function logApp(title,msg,etc,idx3,idx1,idx2)
{
	var etc = etc||Object();
	var idx3 = idx3||null;
	var idx1 = idx1||null;
	var idx2 = idx2||null;

	// console.log('title : '+title);
	// console.log('msg : '+msg);
	// console.log('etc : '+etc);
	// console.log('idx3 : '+idx3);
	// console.log('idx1 : '+idx1);
	// console.log('idx2 : '+idx2);
	// return 'error';

	$.ajax({
		type : 'POST',
		url : '/api/script.log.php',
		data : 
		{
			title:title
			,msg:msg
			,etc:etc
			,idx3:idx3
			,idx1:idx1
			,idx2:idx2
		},
		async : false,
		success : function(d)
		{

		},
		error : function(arg, arg1, arg2)
		{
			alert('서버 통신에 실패했습니다!\n\n잠시후 다시 시도해주세요!');
		}
	});
}
//
//$(function(){
//
//	//구분선택
//	$("header>div>div h2").toggle(function(){$(this).next("ul").fadeIn(200);
//	}, function(){$(this).next("ul").fadeOut(200);});
//
//	$("#gnb>ul>li>a").click(function() {					
//			$(this).toggleClass("on").next("ul").slideToggle(200);
//			$("#gnb>ul>li>a").not(this).removeClass("on").next("ul").slideUp(200);
//			return false;
//		});
//
//});
//
///*select*/
//(function($){
// $.fn.extend({
//
// 	customStyle : function(options) {
//	  if(!$.browser.msie || ($.browser.msie&&$.browser.version>6)){
//	  return this.each(function() {
//
//			var currentSelected = $(this).find(':selected');
//				$(this).after('<span class="customStyleSelectBox"><span class="customStyleSelectBoxInner">'+currentSelected.text()+'</span></span>').css({position:'absolute', opacity:0,fontSize:$(this).next().css('font-size')});
//			var selectBoxSpan = $(this).next();
//			var selectBoxWidth = parseInt($(this).width()) - 5;
//			var selectBoxSpanInner = selectBoxSpan.find(':first-child');
//				selectBoxSpan.css({display:'inline-block'});
//				selectBoxSpanInner.css({width:selectBoxWidth, display:'inline-block'});
//			var selectBoxHeight = parseInt(selectBoxSpan.height()) + parseInt(selectBoxSpan.css('padding-top')) + parseInt(selectBoxSpan.css('padding-bottom'));
//				$(this).height(selectBoxHeight).change(function(){
//				selectBoxSpanInner.text($(this).find(':selected').text()).parent().addClass('changed');
//			});
//
//	  });
//	  }
//	}
// });
//})(jQuery);
//
//$(function(){
//	$('.select').customStyle();
//});
